$(document).ready(function(){"use strict";var t=function(){return console.log("SNAP"),{}}();!function(t){return console.log("INITIALISATION"),t.init={getJson:function(){console.log("GET JSON"),t.json()},useJson:function(){console.log("USE JSON"),t.svgElem.init(),t.introAnimation.init(),t.textureSelect.init()}},t}(t),function(t){return console.log("SETTINGS"),t.settings={area:620,jsonURL:"js/products.json",thickness:50,dom:{canvas:$("#canvas"),productmodule:$("#productModule")}},t}(t),function(t){console.log("JSON");var e=t.settings.jsonURL;return t.json=function(){$.getJSON(e,function(e){console.log("successfully got JSON data"),console.log("JSON length = "+e.length),t.settings.jsonData=e,t.settings.segments=e.length,t.init.useJson()}).fail(function(){console.log("failed to get JSON data")})},t}(t),function(t){return console.log("CANVAS"),t.canvas=new Snap("#canvas"),t}(t),function(t){console.log("ELEMENTS");var e,n=t.settings.area,o=n/2,s,r=t.settings.thickness;return t.svgElem={init:function(){e=t.svgElem,s=t.settings.segments;var n,o,r,a;n=e.degrees(),o=e.singleSegment.wedge(n),r=e.singleSegment.texture(o.width),r=e.singleSegment.circleMask(r),a=e.singleSegment.segment(r,o.mask),e.compiledSegments(n,a)},degrees:function(){return 360/s},singleSegment:{wedge:function(e){var n=e*Math.PI/180,s=o,r=Math.tan(n/2)*s-8,a;return a=t.canvas.polygon(s-r,0,s,s,s+r,0).attr({fill:"#FFF"}),{mask:a,width:r}},texture:function(e){var n=2*e,s=t.canvas.image("img/texture/texture-0.jpg",o-n/2,0,n,n),r;return r=t.canvas.group(s).attr({"class":"texture"})},segment:function(e,n){var o;return o=t.canvas.group().add(e).attr({"class":"segment","data-ref":"0",mask:n})},circleMask:function(e){var n,s,a;return n=t.canvas.circle(o,o,o-r),s=t.canvas.circle(o,o,o),a=t.canvas.mask(),a.add(s),a.add(n),s.attr({fill:"#FFF"}),n.attr({fill:"#000"}),e.attr({mask:a}),e}},compiledSegments:function(e,n){var r=1,a=e,i,c=t.canvas.group(n);for(r;s>r;r++)i=n.clone(),i.transform("r"+a+","+o+","+o),a+=e,i.attr({"data-ref":r}),i.select("image").attr({href:"img/texture/texture-"+r+".jpg"}),c.add(i),c.attr({id:"segmentContainer"});return c}},t}(t),function(t){console.log("INTRO ANIMATION");var e;return t.introAnimation={init:function(){e=t.introAnimation,e.segments()},segments:function(){var e=.5,n=0,o=t.settings.segments,s=$("#segmentContainer"),r;for(n;o>n;n++)console.log("animating polygon #"+n),r=s.find('> .segment[data-ref="'+n+'"]').find("> .texture"),TweenMax.fromTo(r,e,{transform:"translateY(50px)",opacity:0},{transform:"translateY(0)",opacity:1,delay:.25*n})}},t}(t),function(t){console.log("TEXTURE SELECT");var e,n=.5,o,s,r,a,i;return t.textureSelect={init:function(){e=t.textureSelect,o=t.settings.dom.canvas,s=t.settings.dom.productmodule,r=o.find("> #segmentContainer"),a=r.find("> .segment").find("> .texture"),i=s.find("> #ring"),e.listeners()},listeners:function(){r.on("mouseenter",".segment",function(){var t=$(this).find("> .texture");e.textureDormant(a),e.textureActive(t),e.rotateArrow($(this))}),o.on("mouseleave",function(){e.textureActive(a)})},textureActive:function(t){TweenMax.to(t,n,{opacity:1,transform:"translateY(0)"})},textureDormant:function(t){TweenMax.to(t,2*n,{opacity:.15,transform:"translateY(20px)"})},rotateArrow:function(e){var o=t.settings.segments,s=e.attr("data-ref"),r=360/o*parseInt(s,10);console.log("degrees = "+r),TweenMax.to(i,n,{transform:"rotate("+r+"deg)"})}},t}(t),t.init.getJson()});